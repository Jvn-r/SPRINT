<!-- Just a test page which shows all the recieved json data -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">

  <title>WebSocket Test Page</title>
  <style>
    body {
      font-family: monospace;
      background:#111;
      color: #0f0;
      padding: 1rem;
    }

    #log {
      white-space: pre-wrap;
      border: 1px solid #444;
      padding: 1rem;
      background: #000;
      max-height: 90vh;
      overflow-y: auto;
    }
  </style>
</head>
<body>

  <h2>WebSocket Client Receiver</h2>
  <div id="log"></div>

  <script>
    const logDiv = document.getElementById("log");

    function logMessage(msg, isError = false) {
      const p = document.createElement("div");
      p.textContent = msg;
      p.style.color = isError ? "red" : "#0f0";
      logDiv.appendChild(p);
      logDiv.scrollTop = logDiv.scrollHeight;
    }

    const socket = new WebSocket("ws://localhost:8080");

    socket.addEventListener("open", () => {
      logMessage("Connected to server");
    });

    socket.addEventListener("message", (event) => {
      try {
        const data = JSON.parse(event.data);
        logMessage(JSON.stringify(data, null, 2));
      } catch (e) {
        logMessage("Non-JSON message: " + event.data, true);
      }
    });

    socket.addEventListener("close", () => {
      logMessage("Disconnected", true);
    });

    socket.addEventListener("error", (err) => {
      logMessage("WebSocket error", true);
      console.error(err);
    });
    
  </script>

</body>
</html>
